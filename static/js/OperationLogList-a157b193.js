import{B as C,F,g as B,I as T,h as N,i as U,D as W,j}from"./ant-design-vue-69c5e787.js";import{_ as E,a as g}from"./index-a7c45ba7.js";import{S as D,G as k,J as S}from"./@ant-design-c5cfb3ae.js";import{e as V,l as _,r as J,K as Q,X as R,a0 as q,c as e,Z as t,a1 as A,F as G,u as h,E as y}from"./@vue-0057e33b.js";import"./@babel-f2deaedd.js";import"./lodash-es-c37e40cf.js";import"./resize-observer-polyfill-2974a3e4.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-7942c886.js";import"./compute-scroll-into-view-183f845a.js";import"./dayjs-d2af4db4.js";import"./vue-types-ef06c517.js";import"./@ctrl-eebb6dbe.js";import"./dom-align-529d0cdc.js";import"./pinia-75b29db1.js";import"./vue-router-2c461628.js";import"./nprogress-8c52ea9a.js";import"./axios-cd074bab.js";import"./form-data-d2a9677b.js";const K={class:"btn-group"},P={__name:"OperationLogList",setup(X,{expose:L}){const M=V("$http"),u=_(),a=J({start_time:"",end_time:"",operator_name:""}),Y=()=>{u.value.resetFields(),m()},x=()=>{window.location.href=`${g.baseUrl}${g.exportLogs}?start_time=${a.start_time}&end_time=${a.end_time}&operator_name=${a.operator_name}`},c=_(!1),m=()=>{c.value=!0;const o=Object.keys(a).filter(n=>a[n]!==""),r={};o.forEach(n=>{r[n]=a[n]});const f={...r,pageNo:l.value.current,pageSize:l.value.pageSize};M.get(g.logs,{params:f}).then(n=>{const{data:i,total:p}=n;d.value=i,l.value.total=p}).finally(()=>{c.value=!1})},b=_([{title:"用户名",dataIndex:"name",minWidth:200,width:200},{title:"日志详情",dataIndex:"detail",minWidth:200},{title:"创建时间",dataIndex:"created_at",minWidth:200},{title:"更新时间",dataIndex:"updated_at",minWidth:300}]),d=_([]),O=o=>{console.log("确认删除===>",o)},l=_({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,showTotal:o=>`共${o}条`});Q(()=>{m()});const w=o=>{l.value.current=o.current,l.value.pageSize=o.pageSize,l.value.total=o.total,m()};return L({SearchOutlined:D,SyncOutlined:k,DownloadOutlined:S,formRef:u,formState:a,paginationOptions:l,columns:b,dataSource:d,exportTable:x,resetQuery:Y,confirm:O,handleTableChange:w}),(o,r)=>{const f=T,n=N,i=U,p=W,v=C,$=j,I=F,z=B;return R(),q(G,null,[e(I,{ref_key:"formRef",ref:u,name:"advanced_search",class:"ant-advanced-search-form",model:a,onFinish:m},{default:t(()=>[e($,{gutter:24},{default:t(()=>[e(i,{span:6},{default:t(()=>[e(n,{name:"operator_name",label:"操作人名"},{default:t(()=>[e(f,{value:a.operator_name,"onUpdate:value":r[0]||(r[0]=s=>a.operator_name=s)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{name:"start_time",label:"开始时间"},{default:t(()=>[e(p,{value:a.start_time,"onUpdate:value":r[1]||(r[1]=s=>a.start_time=s),placeholder:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(n,{name:"end_time",label:"结束时间"},{default:t(()=>[e(p,{value:a.end_time,"onUpdate:value":r[2]||(r[2]=s=>a.end_time=s),placeholder:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(v,{type:"primary","html-type":"submit"},{icon:t(()=>[e(h(D))]),default:t(()=>[y(" 搜索")]),_:1}),e(v,{style:{margin:"0 8px"},onClick:Y},{icon:t(()=>[e(h(k))]),default:t(()=>[y(" 重置")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),A("div",K,[e(v,{style:{margin:"0 8px"},type:"primary",onClick:x},{icon:t(()=>[e(h(S))]),default:t(()=>[y(" 导出")]),_:1})]),e(z,{columns:b.value,"data-source":d.value,loading:c.value,pagination:l.value,onChange:w,scroll:{x:1500},bordered:"",class:"search-result-list","row-key":s=>s.id},null,8,["columns","data-source","loading","pagination","row-key"])],64)}}},ge=E(P,[["__scopeId","data-v-200af218"]]);export{ge as default};
