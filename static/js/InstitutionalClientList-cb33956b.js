import{m as A,B as ie,F as ue,g as re,I as _e,h as de,i as ce,j as pe,_ as me,k as ve,l as fe,o as ge,S as ye}from"./ant-design-vue-69c5e787.js";import{e as he,l as c,r as E,K as ke,X as p,a0 as g,a1 as u,a5 as D,a6 as m,c as e,Z as n,F as G,a4 as xe,u as L,E as y,a7 as T,B as K,a2 as Ce,a3 as be,Y as Ie}from"./@vue-0057e33b.js";import{u as Se}from"./vue-router-2c461628.js";import{u as we}from"./store-b4c7e3e8.js";import{_ as $e,a as z}from"./index-a7c45ba7.js";import{S as X,G as Y,P as Z}from"./@ant-design-c5cfb3ae.js";import"./@babel-f2deaedd.js";import"./lodash-es-c37e40cf.js";import"./resize-observer-polyfill-2974a3e4.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-7942c886.js";import"./compute-scroll-into-view-183f845a.js";import"./dayjs-d2af4db4.js";import"./vue-types-ef06c517.js";import"./@ctrl-eebb6dbe.js";import"./dom-align-529d0cdc.js";import"./pinia-75b29db1.js";import"./nprogress-8c52ea9a.js";import"./axios-cd074bab.js";import"./form-data-d2a9677b.js";const C=h=>(Ce("data-v-210ca1fd"),h=h(),be(),h),Fe={class:"statistic-panel"},Ue=C(()=>u("p",null,"需联系客户",-1)),Ee=C(()=>u("p",null,"基金到期客户",-1)),De=C(()=>u("p",null,"利率失效客户",-1)),Le={class:"btn-group"},Te={key:0},ze={key:1},Be={key:2,class:"table-operation"},Oe=["onClick"],Re=["onClick"],We=C(()=>u("a",{href:"#"},"删除",-1)),je={__name:"InstitutionalClientList",setup(h,{expose:H}){const b=he("$http"),B=Se(),I=c(),o=E({customer_id:"",capital_account:"",customer_type:1,contact_person:"",assignmenter:"",name:"",phone:"",follower:"",is_internet_channel:"",margin_account:"",developer:"",remind_type:""}),O=E([{key:"否",value:0},{key:"是",value:1}]),R=E([{key:"0-5亿",value:"0-5E"},{key:"5-10亿",value:"5-10E"},{key:"10-20亿",value:"10-20E"},{key:"20-50亿",value:"20-50E"},{key:"50-100亿",value:"50-100E"},{key:"100亿以上",value:">100E"}]),W=l=>{var t;return l&&((t=R.find(i=>i.value===l))==null?void 0:t.key)||""},j=()=>{I.value.resetFields(),d()},v=c({}),k=c(!1),N=c([{title:"机构ID",dataIndex:"id",minWidth:100,width:100},{title:"机构名称",dataIndex:"name",minWidth:200},{title:"资金账号",dataIndex:"capital_account",responsive:["md"],minWidth:250},{title:"联系方式",dataIndex:"phone",responsive:["md"],minWidth:200},{title:"管理规模",dataIndex:"scale_of_management"},{title:"是否是互联网渠道",dataIndex:"is_internet_channel",minWidth:200},{title:"跟进情况",dataIndex:"follower",minWidth:200},{title:"操作",dataIndex:"action",fixed:"right",width:210}]),S=c([]),V=we();function w(l,t=null){l==="edit"&&V.setJgkhForm(t),B.push({path:"/home/jgkhForm",query:{type:l}})}const J=(l=null)=>{V.setJgkhForm(l),B.push({path:"/home/jgkhDetail"})},_=c({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,showTotal:l=>`共${l}条`}),q=l=>{_.value.current=l.current,_.value.pageSize=l.pageSize,_.value.total=l.total,d()};function x(l){o.remind_type===l?o.remind_type="":o.remind_type=l,d()}const ee=async()=>{const{data:l}=await b.get(z.customersRemind);v.value=l.institutional_customer},d=()=>{k.value=!0;const l=Object.keys(o).filter(s=>o[s]!==""),t={};l.forEach(s=>{t[s]=o[s]});const i={...t,pageNo:_.value.current,pageSize:_.value.pageSize};b.get(z.customersList,{params:i}).then(s=>{const{data:r,total:f}=s;S.value=r,_.value.total=f}).finally(()=>{k.value=!1})},M=l=>{const t=A.loading("正在删除",0);b.delete(`${z.customersList}/${l.id}`).then(i=>{i.code===0&&(A.success("删除成功"),d())}).finally(()=>{t()})};return ke(()=>{ee(),d()}),H({SearchOutlined:X,SyncOutlined:Y,PlusOutlined:Z,formRef:I,formState:o,isLoading:k,columns:N,dataSource:S,channelDict:O,institutional_customer:v,scale_of_management_options:R,paginationOptions:_,getScaleText:W,resetQuery:j,confirmDelete:M,filterRemindType:x,routerToForm:w,handleTableChange:q,routerToDetail:J}),(l,t)=>{const i=_e,s=de,r=ce,f=pe,te=ye,ne=me,$=ie,ae=ue,oe=ve,P=fe,le=ge,se=re;return p(),g(G,null,[u("div",Fe,[u("div",{class:D(["statistic-item",{active:o.remind_type==="需要联系客户"}]),onClick:t[0]||(t[0]=a=>x("需要联系客户"))},[Ue,u("p",null,m(v.value.need_to_contact_customers_count||0),1)],2),u("div",{class:D(["statistic-item",{active:o.remind_type==="基金到期客户"}]),onClick:t[1]||(t[1]=a=>x("基金到期客户"))},[Ee,u("p",null,m(v.value.fund_expiry_customers_count||0),1)],2),u("div",{class:D(["statistic-item",{active:o.remind_type==="融资融券利率到期客户"}]),onClick:t[2]||(t[2]=a=>x("融资融券利率到期客户"))},[De,u("p",null,m(v.value.interest_rate_expiry_customers_count||0),1)],2)]),e(ae,{ref_key:"formRef",ref:I,name:"advanced_search",class:"ant-advanced-search-form",model:o,onFinish:d},{default:n(()=>[e(f,{gutter:24},{default:n(()=>[e(r,{span:6},{default:n(()=>[e(s,{name:"customer_id",label:"机构ID"},{default:n(()=>[e(i,{value:o.customer_id,"onUpdate:value":t[3]||(t[3]=a=>o.customer_id=a),valueModifiers:{number:!0}},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"capital_account",label:"资金账号"},{default:n(()=>[e(i,{value:o.capital_account,"onUpdate:value":t[4]||(t[4]=a=>o.capital_account=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"name",label:"机构名称"},{default:n(()=>[e(i,{value:o.name,"onUpdate:value":t[5]||(t[5]=a=>o.name=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"follower",label:"跟进情况"},{default:n(()=>[e(i,{value:o.follower,"onUpdate:value":t[6]||(t[6]=a=>o.follower=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:24},{default:n(()=>[e(r,{span:6},{default:n(()=>[e(s,{name:"contact_person",label:"联 系 人"},{default:n(()=>[e(i,{value:o.contact_person,"onUpdate:value":t[7]||(t[7]=a=>o.contact_person=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"phone",label:"联系方式"},{default:n(()=>[e(i,{value:o.phone,"onUpdate:value":t[8]||(t[8]=a=>o.phone=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"margin_account",label:"融资融券账号"},{default:n(()=>[e(i,{value:o.margin_account,"onUpdate:value":t[9]||(t[9]=a=>o.margin_account=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"assignmenter",label:"服务包分配"},{default:n(()=>[e(i,{value:o.assignmenter,"onUpdate:value":t[10]||(t[10]=a=>o.assignmenter=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:24},{default:n(()=>[e(r,{span:6},{default:n(()=>[e(s,{name:"is_internet_channel",label:"是否是互联网渠道"},{default:n(()=>[e(ne,{value:o.is_internet_channel,"onUpdate:value":t[11]||(t[11]=a=>o.is_internet_channel=a),placeholder:"请选择",allowClear:""},{default:n(()=>[(p(!0),g(G,null,xe(O,a=>(p(),Ie(te,{key:a.value,value:a.value},{default:n(()=>[y(m(a.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e(s,{name:"developer",label:"开发关系"},{default:n(()=>[e(i,{value:o.developer,"onUpdate:value":t[12]||(t[12]=a=>o.developer=a)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:n(()=>[e($,{type:"primary","html-type":"submit"},{icon:n(()=>[e(L(X))]),default:n(()=>[y(" 搜索")]),_:1}),e($,{style:{margin:"0 8px"},onClick:j},{icon:n(()=>[e(L(Y))]),default:n(()=>[y(" 重置")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u("div",Le,[e($,{type:"primary",onClick:t[13]||(t[13]=a=>w("add"))},{icon:n(()=>[e(L(Z))]),default:n(()=>[y(" 新增")]),_:1})]),e(se,{columns:N.value,"data-source":S.value,loading:k.value,pagination:_.value,onChange:q,scroll:{x:1500},bordered:"",class:"search-result-list","row-key":a=>a.index},{bodyCell:n(({column:a,text:F,record:U})=>[a.dataIndex==="scale_of_management"?(p(),g("span",Te,m(W(F)),1)):T("",!0),a.dataIndex==="is_internet_channel"?(p(),g("span",ze,[e(oe,{color:F===1?"green":"red"},{default:n(()=>[y(m(F===1?"是":"否"),1)]),_:2},1032,["color"])])):T("",!0),a.dataIndex==="action"?(p(),g("div",Be,[u("a",{onClick:K(Q=>J(U),["prevent"])},"详情",8,Oe),e(P,{type:"vertical"}),u("a",{onClick:K(Q=>w("edit",U),["prevent"])},"编辑",8,Re),e(P,{type:"vertical"}),e(le,{title:"确定删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:Q=>M(U)},{default:n(()=>[We]),_:2},1032,["onConfirm"])])):T("",!0)]),_:1},8,["columns","data-source","loading","pagination","row-key"])],64)}}},st=$e(je,[["__scopeId","data-v-210ca1fd"]]);export{st as default};
