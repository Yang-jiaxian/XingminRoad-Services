import{m as ue,B as Ie,d as xe,F as Se,e as be,I as Oe,f as Ve,g as je,h as Ee,_ as Re,i as We,j as De,k as Ue,S as Je}from"./ant-design-vue-a65eb274.js";import{e as Te,l as m,r as N,o as Fe,n as re,f as Ne,K as Qe,aL as _,an as w,ao as s,c as t,b8 as a,a9 as R,u as O,E as f,aa as A,aA as h,aG as Ge,ac as W,al as D,v as Me,A as ze,F as Q,aQ as de,am as G,B as me,aN as Le,aM as Pe}from"./@vue-e16f66a9.js";import{u as qe}from"./vue-router-c7505a30.js";import{u as Xe}from"./store-7a36e7d0.js";import{_ as Ke,a as M}from"./index-4cbe4d0c.js";import{C as ce}from"./ColumnSetting-6413dc10.js";import{S as _e,A as pe,G as ke,D as ve,U as Ae}from"./@ant-design-b54d9c65.js";import"./@babel-5c3af8a7.js";import"./resize-observer-polyfill-2974a3e4.js";import"./lodash-es-26de6f87.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-7942c886.js";import"./compute-scroll-into-view-183f845a.js";import"./dayjs-7e8bcc51.js";import"./vue-types-ef06c517.js";import"./@ctrl-eebb6dbe.js";import"./dom-align-529d0cdc.js";import"./pinia-9fcab373.js";import"./nprogress-733e006c.js";import"./axios-cd074bab.js";import"./form-data-d2a9677b.js";import"./vuedraggable-bd7afe23.js";import"./vue-5ceb0fee.js";import"./sortablejs-55e3eda9.js";const $e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAARVBMVEVok9+Zs+vM1feku+5ul+DW3PnT2vhxmeGguOyUsOnR2ffH0/bE0PW0xfGxxPCdtuuRr+l2nOK/zPODpeV8oeS2x/GHp+aKYeLQAAAAeUlEQVQY022Q7Q7DIAhFuSpgtR927fb+jzqWuDrSnQR+HBJugASJfkgQAnlMJPIMocBOjj2IlNOpWFXr4tS6Wj2cagLI5lIyG1GH0TlkIIc6QpdZqTWbXNtOPkw/iQ5+dTWVT5uslfxVHDp8hSJ2tkTG/ex/z7m/8A36hwMat9006gAAAABJRU5ErkJggg==",He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAbFBMVEVld91okuBokeBqheNok95ok99ok99nkt9nkN5liOBkg95ok99nkeBokN9pkOBnjN9mieFnk+Bok+BokuBnkd9nkd9nk99okt9nk+Bnj95pjeBmjeBnkt9ok+Bnkd9ok+Bpj+BljeBpi95ok9/9yPEbAAAAI3RSTlMPqVoT893aj14bF+N+Z0AvIezWvnlw+ci1VDk079uXhEs9LtVk41IAAACzSURBVBjTfZHXDsMgDEUNpAkzIXt1+///seDQKFKq3gdsjvDQBUhCsjzLciYF7OIXTLrwLyvwoGJnJ8oprW356g2lHEBQv8Yr7rxuqa8AGePwXk14/VTXeJPAwmksjBijcE0IDPJQq7RG0qLFhJhDhmirTm2wtBVHzCLsjnAOMJa3oP0GVw33UE6DJseIjTAzGiQxqS17vwy0Ei1P6kG5Oi0PPEHzuG0J/23I2bo/Jp+/4wNnKyB5Czm1owAAAABJRU5ErkJggg==",Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAQlBMVEVmf91olOBnkeBok+Bok+Bok99okuBnkuBokOFqieBok99nkN9ojuRok+Bok+Bokt9pkt5ojt5lj91ljeBli+Bok99uPFj2AAAAFXRSTlMW8JT67Oi9uGAp3Wk43dzKdVZEOiheoVPUAAAAX0lEQVQY04XQWQ6AIAwE0CmVTdy197+qhphqgIT5fElXwJD8QuYRKWJAJRGkSpeGZD/iLFMclBy2LLMWOhwI9oyj9vII7IEri+AVkXVfdKJF4nIJx/1Vq7TOrp/TeOEND6AWkcgC/IAAAAAASUVORK5CYII=",Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAWlBMVEVmd91mkOBok99ok+Bok99nkuBok99ok+Bkg+Fok+BokuBnkuBnkd9mieBlgdxok+BokOBmid9ok+Bokt9okt9nkN9mkN9nj99ok+Bnk99pkuBmkN5ki95ok9+u/UEoAAAAHXRSTlMPe8320Z/XthzBvpqFJBjaTh/sxqZbU0fkqHVzLm1D3zEAAACTSURBVBjTZdFHFsMgDEXRb3AwJe4t7e9/m7ESG4jzJnDuQAMJ35bJPDC4okasMyQLkNTXw67kgaS30RLSiS38RcqE9oy6xsyI6Xf/R4c2Ybmltjx0wljCCnhePgW0jNr0JSWDibkqeQNmplxjRVfAZDpaO9LLipilelu9sFXkWtZCZ62wt6qDdGgQ64IZ9M3v53gDj64btp+Jq4cAAAAASUVORK5CYII=";const k=V=>(Le("data-v-3f6b177d"),V=V(),Pe(),V),et={class:"container"},tt={class:"slider"},nt={class:"btn-wrap"},at={class:"slider-menu"},ot=k(()=>s("img",{src:$e,alt:"all"},null,-1)),lt=k(()=>s("span",{class:"menu-text"},"全部客户",-1)),st=[ot,lt],it=k(()=>s("img",{src:He,alt:"all"},null,-1)),ut=k(()=>s("span",{class:"menu-text"},"需要联系客户",-1)),rt=k(()=>s("img",{src:Ze,alt:"all"},null,-1)),dt=k(()=>s("span",{class:"menu-text"},"基金到期客户",-1)),mt=k(()=>s("img",{src:Ye,alt:"all"},null,-1)),ct=k(()=>s("span",{class:"menu-text"},"利率失效客户",-1)),_t={class:"content-wrap"},pt={style:{"margin-top":"4px"}},kt={style:{"margin-top":"4px"}},vt={key:0},At={key:1,class:"table-operation"},ht=["onClick"],gt=["onClick"],ft=k(()=>s("a",{href:"#",style:{color:"#f0515f"}},"删除",-1)),yt={__name:"ConsumerClientList",setup(V,{expose:he}){const U=Te("$http"),z=qe(),J=m(),T=m({xs:8,sm:16,md:24,lg:32}),p=m({lg:8,xl:4}),L=m({lg:12,xl:8}),l=N({customer_id:"",capital_account:"",customer_type:0,contact_person:"",assignmenter:"",name:"",phone:"",follower:"",is_internet_channel:"",margin_account:"",developer:"",remind_type:"",permissions:""}),P=N([{key:"否",value:0},{key:"是",value:1}]),q=N([{key:"现金宝",value:"现金宝"},{key:"基金定投",value:"基金定投"},{key:"双创板",value:"双创板"},{key:"期权",value:"期权"},{key:"深港通",value:"深港通"},{key:"沪港通",value:"沪港通"},{key:"两融账户",value:"两融账户"},{key:"北交所",value:"北交所"},{key:"养老金帐户",value:"养老金帐户"}]),y=m(!1),X=()=>{J.value.resetFields(),C()},I=m({}),j=m(!1),g=m([{title:"客户ID",dataIndex:"id",minWidth:100,width:100},{title:"姓名",dataIndex:"name",minWidth:200,width:200},{title:"性别",dataIndex:"gender",customRender:({text:n})=>n!=null?n==="--"?"--":n===0?"男":"女":"",width:100},{title:"职业",dataIndex:"occupation",minWidth:250,width:250},{title:"出生日期",dataIndex:"birthday",minWidth:250,width:250},{title:"证件类型",dataIndex:"certificate_type",minWidth:250,width:250},{title:"证件号码",dataIndex:"certificate_number",responsive:["md"],minWidth:250,width:250},{title:"资金账号",dataIndex:"capital_account",responsive:["md"],minWidth:250,width:250},{title:"购买基金总额",dataIndex:"fund_amount_summary",responsive:["md"],sorter:(n,e)=>n.fund_amount_summary-e.fund_amount_summary,minWidth:250,width:250},{title:"联系方式",dataIndex:"phone",responsive:["md"],minWidth:200,width:200},{title:"是否是互联网渠道",dataIndex:"is_internet_channel",minWidth:200,width:200},{title:"跟进情况",dataIndex:"follower",minWidth:200,width:200},{title:"开发关系",dataIndex:"developer",minWidth:200,width:200},{title:"现有资产",dataIndex:"existing_assets",sorter:(n,e)=>n.existing_assets-e.existing_assets,minWidth:200,width:200},{title:"历史峰值",dataIndex:"historical_peak",sorter:(n,e)=>n.historical_peak-e.historical_peak,minWidth:200,width:200},{title:"佣金费率",dataIndex:"commission_rate",minWidth:200,width:200},{title:"客户来源",dataIndex:"customer_source",minWidth:200,width:200},{title:"具体渠道",dataIndex:"specific_channel",minWidth:200,width:200},{title:"操作",dataIndex:"action",fixed:"right",width:210}]),K=m(["id","name","capital_account","fund_amount_summary","phone","is_internet_channel","follower","action"]),B=m([]);Fe(()=>{const n=JSON.parse(localStorage.getItem("grkhColumnSetting")),e=JSON.parse(localStorage.getItem("grkhColumnSettingOrder"));if(n&&n.length&&(K.value=n),e&&e.length){g.value=e;for(let u=0;u<g.value.length;u++){const r=g.value[u];switch(r.dataIndex){case"gender":r.customRender=({text:i})=>i!=null?i==="--"?"--":i===0?"男":"女":"";break;case"fund_amount_summary":r.sorter=(i,d)=>i.fund_amount_summary-d.fund_amount_summary;break;case"existing_assets":r.sorter=(i,d)=>i.existing_assets-d.existing_assets;break;case"historical_peak":r.sorter=(i,d)=>i.historical_peak-d.historical_peak;break}}}re(()=>{B.value=g.value.filter(u=>K.value.includes(u.dataIndex))})});const x=m([]),$=m({}),v=m({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,showTotal:n=>x.value.length===1?"共0条":`共${n}条`}),ge=Ne(()=>B.value.length-1),H=n=>{re(()=>{n.length&&(B.value=n)})},Z=n=>{g.value=n},Y=n=>{v.value.current=n.current,v.value.pageSize=n.pageSize,v.value.total=n.total,C()},ee=Xe();function F(n,e=null){const u={type:n};n==="edit"&&(ee.setGrkhForm(e),u.id=e.id),z.push({path:"/home/grkhForm",query:u})}const te=(n=null)=>{ee.setGrkhForm(n),z.push({path:"/home/grkhDetail",query:{id:n.id}})};function S(n){l.remind_type=n,C()}const fe=async()=>{const{data:n}=await U.get(M.customersRemind);I.value=n.individual_customer},C=()=>{j.value=!0;const n=Object.keys(l).filter(r=>l[r]!==""),e={};n.forEach(r=>{e[r]=l[r]});const u={...e,pageNo:v.value.current,pageSize:v.value.pageSize};U.get(M.customersList,{params:u}).then(r=>{const{data:i,total:d,summary:c}=r;x.value=i,x.value.unshift(c),$.value=c,v.value.total=d}).finally(()=>{j.value=!1})},ne=n=>{const e=ue.loading("正在删除",0);U.delete(`${M.customersList}/${n.id}`).then(u=>{u.code===0&&(ue.success("删除成功"),C())}).finally(()=>{e()})};return Qe(()=>{fe(),C()}),he({SearchOutlined:_e,SyncOutlined:pe,PlusOutlined:ke,DownOutlined:ve,UpOutlined:Ae,ColumnSetting:ce,expand:y,summarySource:$,permissionOptions:q,formRef:J,rowGutter:T,fieldCol:p,operateCol:L,formState:l,isLoading:j,columns:B,dataSource:x,channelDict:P,individual_customer:I,paginationOptions:v,allColumns:g,summaryCellColSpan:ge,resetQuery:X,handleTableChange:Y,filterRemindType:S,confirmDelete:ne,routerToForm:F,routerToDetail:te,handleColumnChange:H,handleColumnOrderChange:Z}),(n,e)=>{const u=Ie,r=xe,i=Oe,d=Ve,c=je,ae=Ee,oe=Je,le=Re,ye=Se,Be=We,se=De,Ce=Ue,we=be;return _(),w("div",et,[s("section",tt,[s("div",nt,[t(u,{type:"primary",size:"large",block:"",onClick:e[0]||(e[0]=o=>F("add"))},{icon:a(()=>[t(O(ke))]),default:a(()=>[f(" 添加个人客户")]),_:1})]),s("ul",at,[s("li",{class:R(["slider-menu-item",{active:l.remind_type===""}]),onClick:e[1]||(e[1]=o=>S(""))},st,2),s("li",{class:R(["slider-menu-item",{active:l.remind_type==="需要联系客户"}]),onClick:e[2]||(e[2]=o=>S("需要联系客户"))},[it,ut,t(r,{count:I.value.need_to_contact_customers_count},null,8,["count"])],2),s("li",{class:R(["slider-menu-item",{active:l.remind_type==="基金到期客户"}]),onClick:e[3]||(e[3]=o=>S("基金到期客户"))},[rt,dt,t(r,{count:I.value.fund_expiry_customers_count},null,8,["count"])],2),s("li",{class:R(["slider-menu-item",{active:l.remind_type==="融资融券利率到期客户"}]),onClick:e[4]||(e[4]=o=>S("融资融券利率到期客户"))},[mt,ct,t(r,{count:I.value.interest_rate_expiry_customers_count},null,8,["count"])],2)])]),s("main",_t,[t(ye,{ref_key:"formRef",ref:J,class:"ant-advanced-search-form",layout:"vertical",model:l,onFinish:C},{default:a(()=>[t(ae,{gutter:T.value},{default:a(()=>[t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"customer_id",label:"客户ID"},{default:a(()=>[t(i,{value:l.customer_id,"onUpdate:value":e[5]||(e[5]=o=>l.customer_id=o),valueModifiers:{number:!0}},null,8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"capital_account",label:"资金账号"},{default:a(()=>[t(i,{value:l.capital_account,"onUpdate:value":e[6]||(e[6]=o=>l.capital_account=o)},null,8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"name",label:"姓  名"},{default:a(()=>[t(i,{value:l.name,"onUpdate:value":e[7]||(e[7]=o=>l.name=o)},null,8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"phone",label:"联系方式"},{default:a(()=>[t(i,{value:l.phone,"onUpdate:value":e[8]||(e[8]=o=>l.phone=o)},null,8,["value"])]),_:1})]),_:1},16),t(c,Ge(L.value,{class:"search-operate"}),{default:a(()=>[s("div",pt,[t(u,{onClick:X},{icon:a(()=>[t(O(pe))]),default:a(()=>[f(" 重置")]),_:1}),t(u,{style:{margin:"0 8px"},type:"primary","html-type":"submit"},{icon:a(()=>[t(O(_e))]),default:a(()=>[f(" 搜索")]),_:1})]),s("div",kt,[s("a",{style:{margin:"0 8px"},onClick:e[9]||(e[9]=o=>y.value=!y.value)},[f(W(y.value?"折叠":"展开")+" ",1),y.value?(_(),D(O(Ae),{key:0})):(_(),D(O(ve),{key:1}))]),t(ce,{"current-columns":B.value,"all-column-list":g.value,"setting-name":"grkhColumnSetting",onColumnChanged:H,onColumnOrderChanged:Z},null,8,["current-columns","all-column-list"])])]),_:1},16)]),_:1},8,["gutter"]),Me(t(ae,{gutter:T.value},{default:a(()=>[t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"is_internet_channel",label:"是否是互联网渠道"},{default:a(()=>[t(le,{value:l.is_internet_channel,"onUpdate:value":e[10]||(e[10]=o=>l.is_internet_channel=o),placeholder:"请选择",allowClear:""},{default:a(()=>[(_(!0),w(Q,null,de(P,o=>(_(),D(oe,{key:o.value,value:o.value},{default:a(()=>[f(W(o.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"permissions",label:"权限情况"},{default:a(()=>[t(le,{value:l.permissions,"onUpdate:value":e[11]||(e[11]=o=>l.permissions=o),placeholder:"请选择",allowClear:""},{default:a(()=>[(_(!0),w(Q,null,de(q,o=>(_(),D(oe,{key:o.value,value:o.value},{default:a(()=>[f(W(o.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"developer",label:"开发关系"},{default:a(()=>[t(i,{value:l.developer,"onUpdate:value":e[12]||(e[12]=o=>l.developer=o)},null,8,["value"])]),_:1})]),_:1},16),t(c,A(h(p.value)),{default:a(()=>[t(d,{name:"follower",label:"跟进情况"},{default:a(()=>[t(i,{value:l.follower,"onUpdate:value":e[13]||(e[13]=o=>l.follower=o)},null,8,["value"])]),_:1})]),_:1},16)]),_:1},8,["gutter"]),[[ze,y.value]])]),_:1},8,["model"]),t(we,{columns:B.value,sticky:"","data-source":x.value,loading:j.value,pagination:v.value,onChange:Y,scroll:{x:1500,y:500},bordered:"",class:"search-result-list","row-key":"id"},{bodyCell:a(({column:o,text:b,record:E})=>[o.dataIndex==="is_internet_channel"?(_(),w(Q,{key:0},[b!=null&&b!=="--"?(_(),w("span",vt,[t(Be,{color:b===1?"green":"red"},{default:a(()=>[f(W(b===1?"是":"否"),1)]),_:2},1032,["color"])])):G("",!0)],64)):G("",!0),o.dataIndex==="action"&&E.name!=="汇总"?(_(),w("div",At,[s("a",{onClick:me(ie=>te(E),["prevent"])},"详情",8,ht),t(se,{type:"vertical"}),s("a",{onClick:me(ie=>F("edit",E),["prevent"])},"编辑",8,gt),t(se,{type:"vertical"}),t(Ce,{title:"确定删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:ie=>ne(E)},{default:a(()=>[ft]),_:2},1032,["onConfirm"])])):G("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}},Pt=Ke(yt,[["__scopeId","data-v-3f6b177d"]]);export{Pt as default};
