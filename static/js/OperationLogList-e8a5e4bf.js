import{B,F as T,e as F,I as N,f as U,g as W,D as E,h as V}from"./ant-design-vue-a65eb274.js";import{_ as j,a as g}from"./index-4cbe4d0c.js";import{S as k,A as S,O as L}from"./@ant-design-b54d9c65.js";import{e as A,l as _,r as Q,K as R,aL as q,an as J,ao as m,c as t,b8 as e,u as y,E as b}from"./@vue-e16f66a9.js";import"./@babel-5c3af8a7.js";import"./resize-observer-polyfill-2974a3e4.js";import"./lodash-es-26de6f87.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-7942c886.js";import"./compute-scroll-into-view-183f845a.js";import"./dayjs-7e8bcc51.js";import"./vue-types-ef06c517.js";import"./@ctrl-eebb6dbe.js";import"./dom-align-529d0cdc.js";import"./pinia-9fcab373.js";import"./vue-router-c7505a30.js";import"./nprogress-733e006c.js";import"./axios-cd074bab.js";import"./form-data-d2a9677b.js";const K={class:"container"},P={class:"content-wrap"},G={class:"search-result-list"},H={class:"btn-group"},X={__name:"OperationLogList",setup(Z,{expose:O}){const M=A("$http"),u=_(),a=Q({start_time:"",end_time:"",operator_name:""}),Y=()=>{u.value.resetFields(),c()},w=()=>{window.location.href=`${g.baseUrl}${g.exportLogs}?start_time=${a.start_time}&end_time=${a.end_time}&operator_name=${a.operator_name}`},d=_(!1),c=()=>{d.value=!0;const o=Object.keys(a).filter(n=>a[n]!==""),s={};o.forEach(n=>{s[n]=a[n]});const v={...s,pageNo:r.value.current,pageSize:r.value.pageSize};M.get(g.logs,{params:v}).then(n=>{const{data:i,total:p}=n;f.value=i,r.value.total=p}).finally(()=>{d.value=!1})},x=_([{title:"用户名",dataIndex:"name",minWidth:200,width:200},{title:"日志详情",dataIndex:"detail",minWidth:200},{title:"创建时间",dataIndex:"created_at",minWidth:200},{title:"更新时间",dataIndex:"updated_at",minWidth:300}]),f=_([]),$=o=>{console.log("确认删除===>",o)},r=_({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,showTotal:o=>`共${o}条`});R(()=>{c()});const D=o=>{r.value.current=o.current,r.value.pageSize=o.pageSize,r.value.total=o.total,c()};return O({SearchOutlined:k,SyncOutlined:S,DownloadOutlined:L,formRef:u,formState:a,paginationOptions:r,columns:x,dataSource:f,exportTable:w,resetQuery:Y,confirm:$,handleTableChange:D}),(o,s)=>{const v=N,n=U,i=W,p=E,h=B,I=V,z=T,C=F;return q(),J("div",K,[m("main",P,[t(z,{ref_key:"formRef",ref:u,name:"advanced_search",class:"ant-advanced-search-form",layout:"vertical",model:a,onFinish:c},{default:e(()=>[t(I,{gutter:24},{default:e(()=>[t(i,{span:6},{default:e(()=>[t(n,{name:"operator_name",label:"操作人名"},{default:e(()=>[t(v,{value:a.operator_name,"onUpdate:value":s[0]||(s[0]=l=>a.operator_name=l)},null,8,["value"])]),_:1})]),_:1}),t(i,{span:6},{default:e(()=>[t(n,{name:"start_time",label:"开始时间"},{default:e(()=>[t(p,{value:a.start_time,"onUpdate:value":s[1]||(s[1]=l=>a.start_time=l),placeholder:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(i,{span:6},{default:e(()=>[t(n,{name:"end_time",label:"结束时间"},{default:e(()=>[t(p,{value:a.end_time,"onUpdate:value":s[2]||(s[2]=l=>a.end_time=l),placeholder:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(i,{span:6,class:"search-operate"},{default:e(()=>[m("div",null,[t(h,{style:{margin:"0 8px"},onClick:Y},{icon:e(()=>[t(y(S))]),default:e(()=>[b(" 重置")]),_:1}),t(h,{type:"primary","html-type":"submit"},{icon:e(()=>[t(y(k))]),default:e(()=>[b(" 搜索")]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),m("div",G,[m("div",H,[t(h,{type:"primary",onClick:w},{icon:e(()=>[t(y(L))]),default:e(()=>[b(" 导出")]),_:1})]),t(C,{columns:x.value,"data-source":f.value,loading:d.value,pagination:r.value,onChange:D,scroll:{x:1500,y:500},bordered:"","row-key":l=>l.id},null,8,["columns","data-source","loading","pagination","row-key"])])])])}}},yt=j(X,[["__scopeId","data-v-c157bf54"]]);export{yt as default};
