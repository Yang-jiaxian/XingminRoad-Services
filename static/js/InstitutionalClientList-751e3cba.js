import{m as me,B as Ee,d as be,F as Ie,e as Be,I as Oe,f as Te,g as Je,h as Ve,_ as We,i as Ne,j as Fe,k as Re,S as De}from"./ant-design-vue-a65eb274.js";import{e as Me,l as c,r as V,o as Qe,n as de,f as je,K as Pe,aL as p,an as k,ao as i,c as t,b8 as l,a9 as W,u as I,E as y,aa as v,aA as A,aG as Ye,ac as B,al as N,v as qe,A as He,F as j,aQ as ce,am as F,B as _e,aN as ze,aM as Ge}from"./@vue-e16f66a9.js";import{u as Xe}from"./vue-router-c7505a30.js";import{u as Ke}from"./store-7a36e7d0.js";import{_ as Le,a as P}from"./index-4cbe4d0c.js";import{C as pe}from"./ColumnSetting-6413dc10.js";import{S as ve,A as Ae,G as fe,D as ge,U as he}from"./@ant-design-b54d9c65.js";import"./@babel-5c3af8a7.js";import"./resize-observer-polyfill-2974a3e4.js";import"./lodash-es-26de6f87.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-7942c886.js";import"./compute-scroll-into-view-183f845a.js";import"./dayjs-7e8bcc51.js";import"./vue-types-ef06c517.js";import"./@ctrl-eebb6dbe.js";import"./dom-align-529d0cdc.js";import"./pinia-9fcab373.js";import"./nprogress-733e006c.js";import"./axios-cd074bab.js";import"./form-data-d2a9677b.js";import"./vuedraggable-bd7afe23.js";import"./vue-5ceb0fee.js";import"./sortablejs-55e3eda9.js";const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAVFBMVEUTmvDB5v5nvvcenvHS7f/N6/56x/gjofFrwPdzxPheuvbK6f654v2z3/yZ1PsrpPKU0vqR0PpaufVCrvQ3qvOs3Pyn2vyByvmAyflgvPZJsfQdnvH/tNFkAAAAe0lEQVQY023QOQ7EMAgFUIzNgJfsmf3+9wyFI4fIv0DiUSAAQg+XeCRAsFHwN2nAKJMdTY4o74behbnMhuYFYHkZWkmExGyJQfPhJjy4iBhdaUvHgSGtOnmesodNeQTYwq/SN2tJSUuOlVJwNeEkkEeN/LXrnN15TueFBz2XA4okdH92AAAAAElFTkSuQmCC",$e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAclBMVEVld95YheMclu4UmfEVmPATmvAUmfAXmO8ble87hecTmvAXmfFnkeAhle81jekSmvETmvATmvEUmfAZl+8lkuxDhd4TmvEVmfEal+4Zl/Acle0ile5qit9mjN8UmfAVme8Wme8WmPAXmfAflu4nkO4TmvALB1YfAAAAJXRSTlMPFFnaqfPdj14b44B6QCH57ta+cDUX57VqZVM7MC/KxaOXeEsumkBmEAAAALdJREFUGNN9kdkSgyAMRRPACi6479o9//+LhWhtZ+z0PJDkDlkIwKBWMgik0gg74kQbJ/HWQvoi3LWDKtjN43SqInYFAHK9whox2Kbkugja2+xZR+72w+Q+0qDcGcVw8VGLfeGMAulyDTYZeaYGOyIJAVG8JIaYNJkFUeDF+/wRl9GJPr0EtKtYI9xcOjfqesXaGcYrN9K0UaaVrbmf5uGZCszQrsNvz+RhJTHi90KOq/uz5ON3vAC4mCIQ87+xiAAAAABJRU5ErkJggg==",et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAP1BMVEVEguUTmvAWmO8SmvETmvEamO8UmfAUmfAUmvAjku0sjuxNe+ITme8UmvAUmfAYme4al+8el+0ekuwsj+YTmvDhs2H8AAAAFHRSTlMW8JTr+GHdvbg5KBTm3Mp1blZEKYm3NaAAAABfSURBVBjTjdBZDoAgDATQKTviLvc/qw2JYAqJzucLdAMU5VdIsWQRBZJEyF0+Se+6kSkSp0YeWxFXP3qcyc7xcrVWgDUB4DcPhWS51HostaNmkUP4/6O2jNbujzM44Q1piRWgJj2C8wAAAABJRU5ErkJggg==",tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAZlBMVEVkd94Xl+8UmfAUmvATmvEVmfA4h+kUmvEVmPAXmPAwjeo4jOoTmvATmfAdle9JgOcTmvETm/ETmvAVmfAblu8glO0TmvATmvATmvAUmvEWmvEWmvAYmfAYl+8ble8dle4nkOkTmvBW8YJiAAAAIXRSTlMPe87A2J8bt5qFJB/z0k4V+OzHqFNH+PXk27CmdXNeWS7cqaU9AAAAl0lEQVQY02XRRxbDIAxF0U8J4EJwidOb9r/JWLYpJ34D4NyBBgJrp1E/0StRI3XURCQwH20VrSJakVMmWkLWwOOoQI4n6H+81HhTwvwa96hwyyi3FNqMqYwWeB2WHDTF7qHxxGk8KGVDI/l2+FBOmUUnQBc6GDOQ4hVRkWyM/WJOlOrjRkVXqMXWJCOdnSl273zfXeN3/AAp7x7n7wgZkgAAAABJRU5ErkJggg==";const f=O=>(ze("data-v-04058f1f"),O=O(),Ge(),O),at={class:"container"},nt={class:"slider"},lt={class:"btn-wrap"},ot={class:"slider-menu"},st=f(()=>i("img",{src:Ze,alt:"all"},null,-1)),it=f(()=>i("span",{class:"menu-text"},"全部客户",-1)),ut=[st,it],rt=f(()=>i("img",{src:$e,alt:"all"},null,-1)),mt=f(()=>i("span",{class:"menu-text"},"需要联系客户",-1)),dt=f(()=>i("img",{src:et,alt:"all"},null,-1)),ct=f(()=>i("span",{class:"menu-text"},"基金到期客户",-1)),_t=f(()=>i("img",{src:tt,alt:"all"},null,-1)),pt=f(()=>i("span",{class:"menu-text"},"利率失效客户",-1)),vt={class:"content-wrap"},At={style:{"margin-top":"4px"}},ft={style:{"margin-top":"4px"}},gt={key:0},ht={key:0},kt={key:2,class:"table-operation"},yt=["onClick"],wt=["onClick"],Ct=f(()=>i("a",{href:"#",style:{color:"#f0515f"}},"删除",-1)),St={__name:"InstitutionalClientList",setup(O,{expose:ke}){const R=Me("$http"),Y=Xe(),D=c(),M=c({xs:8,sm:16,md:24,lg:32}),_=c({lg:8,xl:4}),q=c({lg:12,xl:8}),o=V({customer_id:"",capital_account:"",customer_type:1,contact_person:"",assignmenter:"",name:"",phone:"",follower:"",is_internet_channel:"",margin_account:"",developer:"",remind_type:"",permissions:""}),w=c(!1),H=V([{key:"否",value:0},{key:"是",value:1}]),z=V([{key:"现金宝",value:"现金宝"},{key:"基金定投",value:"基金定投"},{key:"双创板",value:"双创板"},{key:"期权",value:"期权"},{key:"深港通",value:"深港通"},{key:"沪港通",value:"沪港通"},{key:"两融账户",value:"两融账户"},{key:"北交所",value:"北交所"},{key:"养老金帐户",value:"养老金帐户"}]),G=V([{key:"0-5亿",value:"0-5E"},{key:"5-10亿",value:"5-10E"},{key:"10-20亿",value:"10-20E"},{key:"20-50亿",value:"20-50E"},{key:"50-100亿",value:"50-100E"},{key:"100亿以上",value:">100E"}]),X=a=>{var e;return a?((e=G.find(r=>r.value===a))==null?void 0:e.key)||"--":""},K=()=>{D.value.resetFields(),S()},U=c({}),T=c(!1),h=c([{title:"机构ID",dataIndex:"id",minWidth:100,width:100},{title:"机构名称",dataIndex:"name",minWidth:200,width:200},{title:"私募编码",dataIndex:"capital_account",responsive:["md"],minWidth:250,width:250},{title:"购买基金总额",dataIndex:"fund_amount_summary",responsive:["md"],sorter:(a,e)=>a.fund_amount_summary-e.fund_amount_summary,minWidth:250,width:250},{title:"联系人",dataIndex:"contact_person",minWidth:200,width:200},{title:"性别",dataIndex:"gender",customRender:({text:a})=>a!=null?a==="--"?"--":a===0?"男":"女":"",width:100},{title:"联系方式",dataIndex:"phone",responsive:["md"],minWidth:200,width:200},{title:"管理规模",dataIndex:"scale_of_management",minWidth:200,width:200},{title:"是否是互联网渠道",dataIndex:"is_internet_channel",minWidth:200,width:200},{title:"跟进情况",dataIndex:"follower",minWidth:200,width:200},{title:"开发关系",dataIndex:"developer",minWidth:200,width:200},{title:"现有资产",dataIndex:"existing_assets",sorter:(a,e)=>a.existing_assets-e.existing_assets,minWidth:200,width:200},{title:"历史峰值",dataIndex:"historical_peak",sorter:(a,e)=>a.historical_peak-e.historical_peak,minWidth:200,width:200},{title:"佣金费率",dataIndex:"commission_rate",minWidth:200,width:200},{title:"客户来源",dataIndex:"customer_source",minWidth:200,width:200},{title:"具体渠道",dataIndex:"specific_channel",minWidth:200,width:200},{title:"操作",dataIndex:"action",fixed:"right",width:210}]),L=c(["id","name","capital_account","fund_amount_summary","phone","is_internet_channel","follower","action"]),C=c([]);Qe(()=>{const a=JSON.parse(localStorage.getItem("jgkhColumnSetting")),e=JSON.parse(localStorage.getItem("jgkhColumnSettingOrder"));if(a&&a.length&&(L.value=a),e&&e.length){h.value=e;for(let r=0;r<h.value.length;r++){const m=h.value[r];switch(m.dataIndex){case"gender":m.customRender=({text:s})=>s!=null?s==="--"?"--":s===0?"男":"女":"";break;case"fund_amount_summary":m.sorter=(s,u)=>s.fund_amount_summary-u.fund_amount_summary;break;case"existing_assets":m.sorter=(s,u)=>s.existing_assets-u.existing_assets;break;case"historical_peak":m.sorter=(s,u)=>s.historical_peak-u.historical_peak;break}}}de(()=>{C.value=h.value.filter(r=>L.value.includes(r.dataIndex))})});const E=c([]),Z=c({}),$=Ke();function Q(a,e=null){const r={type:a};a==="edit"&&($.setJgkhForm(e),r.id=e.id),Y.push({path:"/home/jgkhForm",query:r})}const ee=(a=null)=>{$.setJgkhForm(a),Y.push({path:"/home/jgkhDetail",query:{id:a.id}})},g=c({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,showTotal:a=>E.value.length===1?"共0条":`共${a}条`}),ye=je(()=>C.value.length-1),te=a=>{de(()=>{a.length&&(C.value=a)})},ae=a=>{h.value=a},ne=a=>{g.value.current=a.current,g.value.pageSize=a.pageSize,g.value.total=a.total,S()};function b(a){o.remind_type===a?o.remind_type="":o.remind_type=a,S()}const we=async()=>{const{data:a}=await R.get(P.customersRemind);U.value=a.institutional_customer},S=()=>{T.value=!0;const a=Object.keys(o).filter(m=>o[m]!==""),e={};a.forEach(m=>{e[m]=o[m]});const r={...e,pageNo:g.value.current,pageSize:g.value.pageSize};R.get(P.customersList,{params:r}).then(m=>{const{data:s,total:u,summary:d}=m;E.value=s,E.value.unshift(d),Z.value=d,g.value.total=u}).finally(()=>{T.value=!1})},le=a=>{const e=me.loading("正在删除",0);R.delete(`${P.customersList}/${a.id}`).then(r=>{r.code===0&&(me.success("删除成功"),S())}).finally(()=>{e()})};return Pe(()=>{we(),S()}),ke({SearchOutlined:ve,SyncOutlined:Ae,PlusOutlined:fe,DownOutlined:ge,UpOutlined:he,ColumnSetting:pe,expand:w,summarySource:Z,permissionOptions:z,formRef:D,rowGutter:M,fieldCol:_,operateCol:q,formState:o,isLoading:T,allColumns:h,summaryCellColSpan:ye,columns:C,dataSource:E,channelDict:H,institutional_customer:U,scale_of_management_options:G,paginationOptions:g,getScaleText:X,resetQuery:K,confirmDelete:le,filterRemindType:b,routerToForm:Q,handleTableChange:ne,routerToDetail:ee,handleColumnChange:te,handleColumnOrderChange:ae}),(a,e)=>{const r=Ee,m=be,s=Oe,u=Te,d=Je,oe=Ve,se=De,ie=We,Ce=Ie,Se=Ne,ue=Fe,xe=Re,Ue=Be;return p(),k("div",at,[i("section",nt,[i("div",lt,[t(r,{type:"primary",size:"large",class:"add-btn",block:"",onClick:e[0]||(e[0]=n=>Q("add"))},{icon:l(()=>[t(I(fe))]),default:l(()=>[y(" 添加机构客户")]),_:1})]),i("ul",ot,[i("li",{class:W(["slider-menu-item",{active:o.remind_type===""}]),onClick:e[1]||(e[1]=n=>b(""))},ut,2),i("li",{class:W(["slider-menu-item",{active:o.remind_type==="需要联系客户"}]),onClick:e[2]||(e[2]=n=>b("需要联系客户"))},[rt,mt,t(m,{count:U.value.need_to_contact_customers_count},null,8,["count"])],2),i("li",{class:W(["slider-menu-item",{active:o.remind_type==="基金到期客户"}]),onClick:e[3]||(e[3]=n=>b("基金到期客户"))},[dt,ct,t(m,{count:U.value.fund_expiry_customers_count},null,8,["count"])],2),i("li",{class:W(["slider-menu-item",{active:o.remind_type==="融资融券利率到期客户"}]),onClick:e[4]||(e[4]=n=>b("融资融券利率到期客户"))},[_t,pt,t(m,{count:U.value.interest_rate_expiry_customers_count},null,8,["count"])],2)])]),i("main",vt,[t(Ce,{ref_key:"formRef",ref:D,name:"advanced_search",class:"ant-advanced-search-form",layout:"vertical",model:o,onFinish:S},{default:l(()=>[t(oe,{gutter:M.value},{default:l(()=>[t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"customer_id",label:"机构ID"},{default:l(()=>[t(s,{value:o.customer_id,"onUpdate:value":e[5]||(e[5]=n=>o.customer_id=n),valueModifiers:{number:!0}},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"capital_account",label:"私募编码"},{default:l(()=>[t(s,{value:o.capital_account,"onUpdate:value":e[6]||(e[6]=n=>o.capital_account=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"name",label:"机构名称"},{default:l(()=>[t(s,{value:o.name,"onUpdate:value":e[7]||(e[7]=n=>o.name=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"follower",label:"跟进情况"},{default:l(()=>[t(s,{value:o.follower,"onUpdate:value":e[8]||(e[8]=n=>o.follower=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,Ye(q.value,{class:"search-operate"}),{default:l(()=>[i("div",At,[t(r,{onClick:K},{icon:l(()=>[t(I(Ae))]),default:l(()=>[y(" 重置")]),_:1}),t(r,{style:{margin:"0 8px"},type:"primary","html-type":"submit"},{icon:l(()=>[t(I(ve))]),default:l(()=>[y(" 搜索")]),_:1})]),i("div",ft,[i("a",{style:{margin:"0 8px"},onClick:e[9]||(e[9]=n=>w.value=!w.value)},[y(B(w.value?"折叠":"展开")+" ",1),w.value?(p(),N(I(he),{key:0})):(p(),N(I(ge),{key:1}))]),t(pe,{"current-columns":C.value,"all-column-list":h.value,"setting-name":"jgkhColumnSetting",onColumnChanged:te,onColumnOrderChanged:ae},null,8,["current-columns","all-column-list"])])]),_:1},16)]),_:1},8,["gutter"]),qe(t(oe,{gutter:M.value},{default:l(()=>[t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"contact_person",label:"联 系 人"},{default:l(()=>[t(s,{value:o.contact_person,"onUpdate:value":e[10]||(e[10]=n=>o.contact_person=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"phone",label:"联系方式"},{default:l(()=>[t(s,{value:o.phone,"onUpdate:value":e[11]||(e[11]=n=>o.phone=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"margin_account",label:"融资融券账号"},{default:l(()=>[t(s,{value:o.margin_account,"onUpdate:value":e[12]||(e[12]=n=>o.margin_account=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"assignmenter",label:"服务包分配"},{default:l(()=>[t(s,{value:o.assignmenter,"onUpdate:value":e[13]||(e[13]=n=>o.assignmenter=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"is_internet_channel",label:"是否是互联网渠道"},{default:l(()=>[t(ie,{value:o.is_internet_channel,"onUpdate:value":e[14]||(e[14]=n=>o.is_internet_channel=n),placeholder:"请选择",allowClear:""},{default:l(()=>[(p(!0),k(j,null,ce(H,n=>(p(),N(se,{key:n.value,value:n.value},{default:l(()=>[y(B(n.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"developer",label:"开发关系"},{default:l(()=>[t(s,{value:o.developer,"onUpdate:value":e[15]||(e[15]=n=>o.developer=n)},null,8,["value"])]),_:1})]),_:1},16),t(d,v(A(_.value)),{default:l(()=>[t(u,{name:"permissions",label:"权限情况"},{default:l(()=>[t(ie,{value:o.permissions,"onUpdate:value":e[16]||(e[16]=n=>o.permissions=n),placeholder:"请选择",allowClear:""},{default:l(()=>[(p(!0),k(j,null,ce(z,n=>(p(),N(se,{key:n.value,value:n.value},{default:l(()=>[y(B(n.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},16)]),_:1},8,["gutter"]),[[He,w.value]])]),_:1},8,["model"]),t(Ue,{columns:C.value,sticky:"","data-source":E.value,loading:T.value,pagination:g.value,onChange:ne,scroll:{x:1500,y:500},bordered:"",class:"search-result-list","row-key":n=>n.index},{bodyCell:l(({column:n,text:x,record:J})=>[n.dataIndex==="scale_of_management"?(p(),k("span",gt,B(X(x)),1)):F("",!0),n.dataIndex==="is_internet_channel"?(p(),k(j,{key:1},[x!=null&&x!=="--"?(p(),k("span",ht,[t(Se,{color:x===1?"green":"red"},{default:l(()=>[y(B(x===1?"是":"否"),1)]),_:2},1032,["color"])])):F("",!0)],64)):F("",!0),n.dataIndex==="action"&&J.name!=="汇总"?(p(),k("div",kt,[i("a",{onClick:_e(re=>ee(J),["prevent"])},"详情",8,yt),t(ue,{type:"vertical"}),i("a",{onClick:_e(re=>Q("edit",J),["prevent"])},"编辑",8,wt),t(ue,{type:"vertical"}),t(xe,{title:"确定删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:re=>le(J)},{default:l(()=>[Ct]),_:2},1032,["onConfirm"])])):F("",!0)]),_:1},8,["columns","data-source","loading","pagination","row-key"])])])}}},Xt=Le(St,[["__scopeId","data-v-04058f1f"]]);export{Xt as default};
